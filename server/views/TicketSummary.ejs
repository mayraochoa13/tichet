<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>View Tickets</title>
   <style>
    *{
        text-align: center;
    }
    td, th {
      border: 1px solid #dddddd;
      text-align: center;
      padding: 8px;
    }

    </style>

</head>
<body>
  <h1>Ticket Summary</h1>
  <table>
    <tr style="background-color:#DEDDDC;">

     <form action="/filterTickets" method="post">
            <th>Title</th>
            <th>Description</th>
              <th>
                Urgency
              </th>
            <th>Created by</th>
            <th>Contact</th>
            <th>
             Status
            </th>
            <th>
               Date
           </th>
         
     </form> 
    </tr>
    <% tickets.forEach(function(ticket) {  %>
    <tr>
      <td> <%= ticket.title %></td>
      <td> <%= ticket.description %></td>
      <td> <%= ticket.urgency.substr(1) %></td>
      <td> <%= ticket.createdBy %></td>      
      <td> <%= ticket.contact %></td>


<!-- allow staff(owner / admin) to make changes to the ticket status  -->
        <td>  
            <form  action="/updateTicket" method="post">
                                <select class="selectpicker" data-style="btn-info" name="statusUpdate" >
                                    
                                    <option value="" disabled selected hidden><%=ticket.status %></option>
                                        <optgroup label="Update Status"></optgroup>
                                        <option name="complete" value="<%= ticket._id %>$<%=role %>$complete">complete</option>
                                        <option name="pending" value="<%= ticket._id %>$<%=role %>$pending">pending</option>
                                       
                                        <optgroup label="DELETE"></optgroup>
                                        <option name="DELETE" value="<%= ticket._id %>$<%=role %>$DELETE">DELETE</option>
                                    
                                </select>
                                <input type="submit" value="update"/> 
            </form>

        </td>
      <!-- <td> <%= ticket.status %></td> -->
      <td><%= ticket.createdAt %></td>

      <% }) %>

    </tr>
  </table>




  <br>
  <form action="/return" method="post">
      <button type="submit" name="returnBtn" value="<%=role%>"> <-back to dashboard</button>
  </form>

</body>
</html>
